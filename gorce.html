<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Dynamic Circular Graph with Random Values</title>
   <style>
      .graph {
         width: 300px;
         height: 300px;
      }

      .axis {
         stroke: #ccc;
      }

      .dot {
         transition: opacity 0.5s ease-out; /* Smooth fade out */
      }
   </style>
</head>

<body>
   <svg class="graph" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" id="graph">
      <!-- Circle outline -->
      <circle cx="150" cy="150" r="100" fill="none" stroke="#ccc" stroke-width="2" />

      <!-- X and Y axes -->
      <line x1="50" y1="150" x2="250" y2="150" class="axis" />
      <line x1="150" y1="50" x2="150" y2="250" class="axis" />

      <!-- Line from center to dot -->
      <line id="line" x1="150" y1="150" x2="150" y2="150" stroke="blue" stroke-width="2" />
   </svg>
   <div class="gForce"></div>
   <script>
      function plotVals(ax, ay, az, multiplier = 1) {
         let gForce = Math.sqrt(ax * ax + ay * ay + az * az) * multiplier;
         document.querySelector('.gForce').innerText = gForce.toFixed(2);

         let svg = document.getElementById('graph');

         // Fade out previous dot
         let previousDot = svg.querySelector('.dot');
         if (previousDot) {
            previousDot.style.opacity = 0;
            setTimeout(() => {
               svg.removeChild(previousDot);
            }, 500); // Wait for fade out transition (0.5s)
         }

         let x = 150 + ax * 100;
         let y = 150 - az * 100;

         let circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
         circle.setAttribute('cx', x);
         circle.setAttribute('cy', y);
         circle.setAttribute('r', 5);
         circle.classList.add('dot');

         gForce / (Math.sqrt(3) * multiplier) * 255

         circle.style.fill = `rgb(${gForce / (Math.sqrt(3) * multiplier) * 255}, ${255 - gForce / (Math.sqrt(3) * multiplier) * 255}, 0)`;

         svg.appendChild(circle);

         // Smooth transition for the line
         let line = document.getElementById('line');
         line.setAttribute('x2', x);
         line.setAttribute('y2', y);
      }

      setInterval(function () {
         let ax = Math.random() * 2 - 1; // Random value between -1 and 1 for ax
         let ay = Math.random() * 2 - 1; // Random value between -1 and 1 for ay
         let az = Math.random() * 2 - 1; // Random value between -1 and 1 for az
         plotVals(ax, ay, az);
      }, 1000); // Update every second
   </script>
</body>

</html>
